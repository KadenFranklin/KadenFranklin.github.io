<!DOCTYPE html>
  <html lang="en">

    <head>
      <title> See The Stars! </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" href="./style.css">
      <link rel="preconnect" href="https://fonts.googleapis.com/">
      <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
      <!-- CSS only -->
      <link href="./index_files/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    </head>

    <body>
      <div class="container">
        <div id="jmb" class="jumbotron">
            <h1> Can you see the stars? </h1>
            <h3> Or maybe some satellites?</h3>


            <h4>Find a list of all Satellites and their norad ids: <a href="https://in-the-sky.org/search.php?s=&searchtype=Spacecraft&satorder=0" style = "color:white">Here</a> </h4>
        </div>
      </div>

      <div id="text-boxes" class="container">
        <label id="city_label">City:</label><br>
        <input type="text" id="City" name="city" value=""><br>
        <label id="state_label">State:</label><br>
        <input type="text" id="State" name="state" value=""><br>
        <label id="Norad_ID_label">Norad_ID:</label><br>
        <input type="text" id="Norad_ID" name="Norad_ID" value=""><br>
        <input type="submit" id="Submit_button" value="Do The Thing!">
      </div>

      <div class="float-container">
        <div id="weather_element" class="float-child-container">
          <h1>Weather:</h1>
          <h2>Today:</h2>
          <div id="w-day-0" class="container">
            <h4>Temperature:</h4>
            <p id="w-day-0-temp"> </p>
            <h4>Wind:</h4>
            <p id ="w-day-0-wind" >
            <h4>Description:</h4>
            <p id ="w-day-0-desc"></p>
          </div>

          <h2>Day 1:</h2>
          <div id="w-day-1" class="container">
            <h4>Temperature:</h4>
            <p id="w-day-1-temp"> </p>
            <h4>Wind:</h4>
            <p id ="w-day-1-wind"> </p>
          </div>

          <h2>Day 2:</h2>
          <div id="w-day-2" class="container">
            <h4>Temperature:</h4>
            <p id="w-day-2-temp"> </p>
            <h4>Wind:</h4>
            <p id ="w-day-2-wind"> </p>
          </div>

          <h2>Day 3:</h2>
          <div id="w-day-3" class="container">
            <h4>Temperature:</h4>
            <p id="w-day-3-temp"> </p>
            <h4>Wind:</h4>
            <p id ="w-day-3-wind"> </p>
          </div>
        </div>

        <div id="satellite_element" class="float-child-container">
          <h1>Satellite:</h1>

          <h2>Visible: </h2>
          <p id="visible"> </p>

          <h2>Rise:</h2>
          <div id="s-rise" class="container">
            <h4>Alt:</h4>
            <p id="s-rise-alt"> </p>
            <h4>Az:</h4>
            <p id="s-rise-az"> </p>
            <h4>Time:</h4>
            <p id ="s-rise-time"> </p>
          </div>

          <h2>Culmination:</h2>
          <div id="s-culm" class="container">
            <h4>Alt:</h4>
            <p id="s-culm-alt"> </p>
            <h4>Az:</h4>
            <p id="s-culm-az"> </p>
            <h4>Time:</h4>
            <p id ="s-culm-time"> </p>
          </div>

          <h2>Set:</h2>
          <div id="s-set" class="container">
            <h4>Alt:</h4>
            <p id="s-set-alt"> </p>
            <h4>Az:</h4>
            <p id="s-set-az"> </p>
            <h4>Time:</h4>
            <p id ="s-set-time"> </p>
          </div>

          <p>All date/times are in UTC (Coordinated Universal Time). </p>
        </div>
      </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

        <script>
        //just need to take data from each JSON file and put it in the variables;

        $("#Submit_button").on("click", function() {
            console.log("Oh boy here we go!");
            var city = $("#City").val();
            var state  = $("#State").val();
            var norad = $("#Norad_ID").val();

            var weat_url_1 = "https://goweather.herokuapp.com/weather/%7B" ;
            var weat_url_2 = "%7D" ;
            var combo_2 = weat_url_1 + city + "-" + state + weat_url_2;

            $.ajax(combo_2, {
              success: function (data) {

                console.log(data);
                //fill weather tags
                $("#w-day-0-temp").text("");
                $("#w-day-0-wind").text("");
                $("#w-day-0-desc").text("");
                $("#w-day-1-temp").text("");
                $("#w-day-1-wind").text("");
                $("#w-day-2-temp").text("");
                $("#w-day-2-wind").text("");
                $("#w-day-3-temp").text("");
                $("#w-day-3-wind").text("");
              }
            });

            var coor_url_1 = "https://api.opencagedata.com/geocode/v1/json?q=";
            var coor_url_2 = "&key=274df8982be3470b9b369075e615ba0f&abbrv=1&pretty=1&no_annotations=1";
            var combo_1 = coor_url_1 + city + "-" + state + coor_url_2;

            $.ajax(combo_1, {
              success: function (data) {
                console.log(data);
                //parse json to get coordinates
                var lat_coord = "";
                var lon_coord = "";

                var lat = "?lat=" + lat_coord ;
                var lon = "&lon=" + lon_coord ;
                var satt_url_1 = "https://satellites.fly.dev/passes/";
                var satt_url_2 = "&limit=1&days=1";
                var combo_3 = satt_url_1 + norad + lat + lon + satt_url_2;

                $.ajax({
                  url: combo_3,
                  type: "GET",
                  dataType: 'json',
                  success: function(data) {
                  console.log(data);
                  //fill satellite data
                  $("#visible").text("")
                  $("#s-rise-alt").text("");
                  $("#s-rise-az").text("");
                  $("#s-rise-time").text("");
                  $("#s-culm-alt").text("");
                  $("#s-culm-az").text("");
                  $("#s-culm-time").text("");
                  $("s-set-alt").text("");
                  $("s-set-az").text("");
                  $("s-set-time").text("");
                }
              });
              }
            });
          });

        </script>

<!-- can put everything above this in the script.js when done and it will run because of this line -->
        <script src="script.js"> </script>

    </body>
</html>

<!-- Kaden Franklin -->
